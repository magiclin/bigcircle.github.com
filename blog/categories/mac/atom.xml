<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: mac | dayuan's cabin]]></title>
  <link href="http://Bigcircle.github.com/blog/categories/mac/atom.xml" rel="self"/>
  <link href="http://Bigcircle.github.com/"/>
  <updated>2012-08-20T17:49:18+08:00</updated>
  <id>http://Bigcircle.github.com/</id>
  <author>
    <name><![CDATA[bigcircle]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[免去sudo时输入密码]]></title>
    <link href="http://Bigcircle.github.com/blog/use-sudo-without-password.html/"/>
    <updated>2012-08-20T14:16:00+08:00</updated>
    <id>http://Bigcircle.github.com/blog/use-sudo-without-password</id>
    <content type="html"><![CDATA[<p>经常敲命令的同学肯定会遇到需要root权限的问题，为了安全考虑大部分情况下千万不要在root权限下操作，否则会遇到各种难缠的问题，sudo 就是为解决这个问题产生的。</p>

<h3 id="section">为什么不想敲密码</h3>
<ul>
  <li>程序员往往都是很懒的，很多代码的产生就是为了方便懒惰的程序员</li>
  <li>输入密码很麻烦，很费时。(好吧，其实也花不了多长时间。。)</li>
  <li>能方便设置一些启动项，特别是一个项目启动项很多，为了懒就写一个启动脚本</li>
  <li>自己的系统自己用，没必要像在服务器上对权限要求那么严格</li>
  <li>当然也有忘记root密码的情况。。</li>
</ul>

<h3 id="section-1">怎么做</h3>
<p>其实很简单，只需要小修改 /etc/sudoers 这个文件就可以了。
默认情况的权限是这样的</p>

<pre><code>root ALL=(ALL) ALL
%admin ALL=(ALL) ALL
</code></pre>

<p>意思是root用户和admin群组的用户都能执行所有命令，当然也是需要输入password的
修改如下：</p>

<pre><code># 修改amdin组都不用输入密码
%admin ALL=(ALL) NOPASSWD: NOPASSWD ALL
# 只是想让 marine 用户输入sudo不需要密码
marine ALL=(ALL) NOPASSWD: ALL
</code></pre>

<p>当然可定制丰富的权限要求，不过那样还不如不设置，统一要求输入密码得了。</p>

<h3 id="section-2">一个好用的小技巧</h3>
<p>有时候当我们输入了一大串命令后敲下去发现需要写sudo，这个时候不得不找回上个命令，然后回到命令开头，然后加上sudo空格，稍微有点麻烦，可以用以下2个小方法</p>

<pre><code>sudo !!   	# !! 表示上次执行的命令
</code></pre>

<p>或者用zsh的同学可以自定义个命令绑定快捷键，比如这样:</p>

<pre><code>sudo-command-line() {
	[[ -z $BUFFER ]] &amp;&amp; zle up-history
	[[ $BUFFER != sudo\ * ]] &amp;&amp; BUFFER="sudo $BUFFER"
   zle end-of-line
}
zle -N sudo-command-line
bindkey "\e\e" sudo-command-line
</code></pre>

<p>定义快捷键: 连续按2个ESC自动在前面添加sudo，非常方便快捷</p>

<p>前段时间看了个介绍 <a href="http://www.commandlinefu.com/commands/browse/sort-by-votes">linux命令的网站</a>，有很多实用方便的快捷键，大家有兴趣可以去淘几个</p>
]]></content>
  </entry>
  
</feed>
